"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[483],{5483:function(t,e,r){r.r(e),r.d(e,{OpfsAhpFS:function(){return Y}});var n=r(6148),i=r(1303),a=r(9472),o=r(7166),s=r(3032),c=r(8489),l=r(4531),h=r(7853),u=r(1020),d=r(8334),f=r(2839),p=r(5669),v=r(6697);(0,v.i)(),(0,v.i)(),(0,v.i)();var y={EBADF:8,EBADFD:127,EEXIST:20,EINVAL:28,EISDIR:31,ENODEV:43,ENOENT:44,ENOTDIR:54,ENOTEMPTY:55},w=function(t){(0,u.Z)(r,t);var e=(0,d.Z)(r);function r(t,n){var i;return(0,h.Z)(this,r),i=e.call(this,n),"number"==typeof t?i.code=t:"string"==typeof t&&(i.code=y[t]),i}return(0,l.Z)(r)}((0,f.Z)(Error)),m=function(t,e){var r=t.FS,n={tryFSOperation:function(t){try{return t()}catch(e){throw e.code?"UNKNOWN"===e.code?new r.ErrnoError(y.EINVAL):new r.ErrnoError(e.code):e}},mount:function(t){return n.createNode(null,"/",16895,0)},syncfs:function(t,e,r){},createNode:function(t,e,i,a){if(!r.isDir(i)&&!r.isFile(i))throw new r.ErrnoError(28);var o=r.createNode(t,e,i);return o.node_ops=n.node_ops,o.stream_ops=n.stream_ops,o},getMode:function(t){return n.tryFSOperation((function(){return e.lstat(t).mode}))},realPath:function(t){for(var e=[];t.parent!==t;)e.push(t.name),t=t.parent;return e.push(t.mount.opts.root),e.reverse(),e.join("/")},node_ops:{getattr:function(t){n.realPath(t);var r=n.realPath(t);return n.tryFSOperation((function(){var n=e.lstat(r);return(0,c.Z)((0,c.Z)({},n),{},{dev:0,ino:t.id,nlink:1,rdev:t.rdev,atime:new Date(n.atime),mtime:new Date(n.mtime),ctime:new Date(n.ctime)})}))},setattr:function(t,r){n.realPath(t);var i=n.realPath(t);n.tryFSOperation((function(){void 0!==r.mode&&e.chmod(i,r.mode),void 0!==r.size&&e.truncate(i,r.size),void 0!==r.timestamp&&e.utimes(i,r.timestamp,r.timestamp),void 0!==r.size&&e.truncate(i,r.size)}))},lookup:function(t,e){n.realPath(t);var r=[n.realPath(t),e].join("/"),i=n.getMode(r);return n.createNode(t,e,i)},mknod:function(t,i,a,o){n.realPath(t);var s=n.createNode(t,i,a,o),c=n.realPath(s);return n.tryFSOperation((function(){return r.isDir(s.mode)?e.mkdir(c,{mode:a}):e.writeFile(c,"",{mode:a}),s}))},rename:function(t,r,i){n.realPath(t),n.realPath(r);var a=n.realPath(t),o=[n.realPath(r),i].join("/");n.tryFSOperation((function(){e.rename(a,o)})),t.name=i},unlink:function(t,r){n.realPath(t);var i=[n.realPath(t),r].join("/");try{e.unlink(i)}catch(a){}},rmdir:function(t,r){n.realPath(t);var i=[n.realPath(t),r].join("/");return n.tryFSOperation((function(){e.rmdir(i)}))},readdir:function(t){n.realPath(t);var r=n.realPath(t);return n.tryFSOperation((function(){return e.readdir(r)}))},symlink:function(t,e,i){throw n.realPath(t),new r.ErrnoError(63)},readlink:function(t){throw n.realPath(t),new r.ErrnoError(63)}},stream_ops:{open:function(t){n.realPath(t.node);var i=n.realPath(t.node);return n.tryFSOperation((function(){r.isFile(t.node.mode)&&(t.shared.refcount=1,t.nfd=e.open(i))}))},close:function(t){return n.realPath(t.node),n.tryFSOperation((function(){r.isFile(t.node.mode)&&t.nfd&&0===--t.shared.refcount&&e.close(t.nfd)}))},dup:function(t){n.realPath(t.node),t.shared.refcount++},read:function(t,r,i,a,o){return n.realPath(t.node),0===a?0:n.tryFSOperation((function(){return e.read(t.nfd,r,i,a,o)}))},write:function(t,r,i,a,o){return n.realPath(t.node),n.tryFSOperation((function(){return e.write(t.nfd,r.buffer,i,a,o)}))},llseek:function(t,i,a){n.realPath(t.node);var o=i;if(1===a?o+=t.position:2===a&&r.isFile(t.node.mode)&&n.tryFSOperation((function(){var r=e.fstat(t.nfd);o+=r.size})),o<0)throw new r.ErrnoError(28);return o},mmap:function(e,i,a,o,s){if(n.realPath(e.node),!r.isFile(e.node.mode))throw new r.ErrnoError(y.ENODEV);var c=t.mmapAlloc(i);return n.stream_ops.read(e,t.HEAP8,c,i,a),{ptr:c,allocated:!0}},msync:function(t,e,r,i,a){return n.realPath(t.node),n.stream_ops.write(t,e,0,i,r),0}}};return n};(0,v.i)();var k,g,S,Z,P,E,x,O,F,N,b,D,M,I,_,A,T,j,z,W,R,H=16384,C=32768,B=function(){function t(e){var r=e.root,n=e.initialPoolSize,i=e.maintainedPoolSize;(0,h.Z)(this,t),(0,v.e)(this,M),(0,v.e)(this,k,!1),(0,v.e)(this,g),(0,v.e)(this,S),(0,v.e)(this,Z),(0,v.e)(this,P),(0,v.e)(this,E),(0,v.e)(this,x,new Map),(0,v.e)(this,O,new Map),(0,v.e)(this,F,0),(0,v.e)(this,N,new Map),(0,v.e)(this,b,new Map),this.lastCheckpoint=0,this.checkpointInterval=6e4,this.poolCounter=0,(0,v.e)(this,D,new Set),this.root=r,this.initialPoolSize=n||1e3,this.maintainedPoolSize=i||100,this.readyPromise=(0,v.g)(this,M,I).call(this)}return(0,l.Z)(t,[{key:"ready",get:function(){return(0,v.d)(this,k)}},{key:"maintainPool",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var r,n,i,a,c=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=e||this.maintainedPoolSize,r=e-this.state.pool.length,n=[],i=0;i<r;i++)n.push(new Promise(function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var r,n,i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return++c.poolCounter,r="".concat((Date.now()-1704063600).toString(16).padStart(8,"0"),"-").concat(c.poolCounter.toString(16).padStart(8,"0")),t.next=4,(0,v.d)(c,Z).getFileHandle(r,{create:!0});case 4:return n=t.sent,t.next=7,n.createSyncAccessHandle();case 7:i=t.sent,(0,v.d)(c,x).set(r,n),(0,v.d)(c,O).set(r,i),(0,v.g)(c,M,A).call(c,{opp:"createPoolFile",args:[r]}),c.state.pool.push(r),e();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));for(a=0;a>r;a--)n.push(new Promise(function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var r,n,i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.state.pool.pop(),(0,v.g)(c,M,A).call(c,{opp:"deletePoolFile",args:[n]}),i=(0,v.d)(c,x).get(n),null!==(r=(0,v.d)(c,O).get(n))&&void 0!==r&&r.close(),t.next=6,i.remove().then((function(){(0,v.d)(c,x).delete(n),(0,v.d)(c,O).delete(n),e()}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));return t.next=6,Promise.all(n);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_createPoolFileState",value:function(t){this.state.pool.push(t)}},{key:"_deletePoolFileState",value:function(t){var e=this.state.pool.indexOf(t);e>-1&&this.state.pool.splice(e,1)}},{key:"maybeCheckpointState",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=Date.now()-this.lastCheckpoint>this.checkpointInterval,!t.t0){t.next=4;break}return t.next=4,this.checkpointState();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkpointState",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=(new TextEncoder).encode(JSON.stringify(this.state)),(0,v.d)(this,E).truncate(0),(0,v.d)(this,E).write(e,{at:0}),(0,v.d)(this,E).flush(),this.lastCheckpoint=Date.now();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"flush",value:function(){var t,e=(0,a.Z)((0,v.d)(this,D));try{for(e.s();!(t=e.n()).done;){var r=t.value;try{r.flush()}catch(n){}}}catch(i){e.e(i)}finally{e.f()}(0,v.d)(this,D).clear()}},{key:"exit",value:function(){var t,e=(0,a.Z)((0,v.d)(this,O).values());try{for(e.s();!(t=e.n()).done;){t.value.close()}}catch(r){e.e(r)}finally{e.f()}(0,v.d)(this,E).flush(),(0,v.d)(this,E).close()}},{key:"chmod",value:function(t,e){var r=this;(0,v.g)(this,M,_).call(this,{opp:"chmod",args:[t,e]},(function(){r._chmodState(t,e)}))}},{key:"_chmodState",value:function(t,e){(0,v.g)(this,M,j).call(this,t).mode=e}},{key:"close",value:function(t){var e=(0,v.g)(this,M,z).call(this,t);(0,v.d)(this,N).delete(t),(0,v.d)(this,b).delete(e)}},{key:"fstat",value:function(t){var e=(0,v.g)(this,M,z).call(this,t);return this.lstat(e)}},{key:"lstat",value:function(t){var e=(0,v.g)(this,M,j).call(this,t),r="file"===e.type?(0,v.d)(this,O).get(e.backingFilename).getSize():0;return{dev:0,ino:0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:0,size:r,blksize:4096,blocks:Math.ceil(r/4096),atime:e.lastModified,mtime:e.lastModified,ctime:e.lastModified}}},{key:"mkdir",value:function(t,e){var r=this;(0,v.g)(this,M,_).call(this,{opp:"mkdir",args:[t,e]},(function(){r._mkdirState(t,e)}))}},{key:"_mkdirState",value:function(t,e){var r,n=(0,v.g)(this,M,T).call(this,t),i=n.pop(),o=[],s=this.state.root,c=(0,a.Z)(n);try{for(c.s();!(r=c.n()).done;){var l=r.value;if(o.push(t),!Object.prototype.hasOwnProperty.call(s.children,l)){if(null===e||void 0===e||!e.recursive)throw new w("ENOENT","No such file or directory");this.mkdir(o.join("/"))}if("directory"!==s.children[l].type)throw new w("ENOTDIR","Not a directory");s=s.children[l]}}catch(u){c.e(u)}finally{c.f()}if(Object.prototype.hasOwnProperty.call(s.children,i))throw new w("EEXIST","File exists");var h={type:"directory",lastModified:Date.now(),mode:(null===e||void 0===e?void 0:e.mode)||H,children:{}};s.children[i]=h}},{key:"open",value:function(t,e,r){if("file"!==(0,v.g)(this,M,j).call(this,t).type)throw new w("EISDIR","Is a directory");var n=(0,v.g)(this,M,W).call(this);return(0,v.d)(this,N).set(n,t),(0,v.d)(this,b).set(t,n),n}},{key:"readdir",value:function(t){var e=(0,v.g)(this,M,j).call(this,t);if("directory"!==e.type)throw new w("ENOTDIR","Not a directory");return Object.keys(e.children)}},{key:"read",value:function(t,e,r,n,i){var a=(0,v.g)(this,M,z).call(this,t),o=(0,v.g)(this,M,j).call(this,a);if("file"!==o.type)throw new w("EISDIR","Is a directory");return(0,v.d)(this,O).get(o.backingFilename).read(new Int8Array(e.buffer,r,n),{at:i})}},{key:"rename",value:function(t,e){var r=this;(0,v.g)(this,M,_).call(this,{opp:"rename",args:[t,e]},(function(){r._renameState(t,e,!0)}))}},{key:"_renameState",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,v.g)(this,M,T).call(this,t),i=n.pop(),a=(0,v.g)(this,M,j).call(this,n.join("/"));if(!Object.prototype.hasOwnProperty.call(a.children,i))throw new w("ENOENT","No such file or directory");var o=(0,v.g)(this,M,T).call(this,e),s=o.pop(),c=(0,v.g)(this,M,j).call(this,o.join("/"));if(r&&Object.prototype.hasOwnProperty.call(c.children,s)){var l=c.children[s];(0,v.d)(this,O).get(l.backingFilename).truncate(0),this.state.pool.push(l.backingFilename)}c.children[s]=a.children[i],delete a.children[i]}},{key:"rmdir",value:function(t){var e=this;(0,v.g)(this,M,_).call(this,{opp:"rmdir",args:[t]},(function(){e._rmdirState(t)}))}},{key:"_rmdirState",value:function(t){var e=(0,v.g)(this,M,T).call(this,t),r=e.pop(),n=(0,v.g)(this,M,j).call(this,e.join("/"));if(!Object.prototype.hasOwnProperty.call(n.children,r))throw new w("ENOENT","No such file or directory");var i=n.children[r];if("directory"!==i.type)throw new w("ENOTDIR","Not a directory");if(Object.keys(i.children).length>0)throw new w("ENOTEMPTY","Directory not empty");delete n.children[r]}},{key:"truncate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(0,v.g)(this,M,j).call(this,t);if("file"!==r.type)throw new w("EISDIR","Is a directory");var n=(0,v.d)(this,O).get(r.backingFilename);if(!n)throw new w("ENOENT","No such file or directory");n.truncate(e),(0,v.d)(this,D).add(n)}},{key:"unlink",value:function(t){var e=this;(0,v.g)(this,M,_).call(this,{opp:"unlink",args:[t]},(function(){e._unlinkState(t,!0)}))}},{key:"_unlinkState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,v.g)(this,M,T).call(this,t),n=r.pop(),i=(0,v.g)(this,M,j).call(this,r.join("/"));if(!Object.prototype.hasOwnProperty.call(i.children,n))throw new w("ENOENT","No such file or directory");var a=i.children[n];if("file"!==a.type)throw new w("EISDIR","Is a directory");if(delete i.children[n],e){var o=(0,v.d)(this,O).get(a.backingFilename);null!==o&&void 0!==o&&o.truncate(0),(0,v.d)(this,D).add(o),(0,v.d)(this,b).has(t)&&((0,v.d)(this,N).delete((0,v.d)(this,b).get(t)),(0,v.d)(this,b).delete(t))}this.state.pool.push(a.backingFilename)}},{key:"utimes",value:function(t,e,r){var n=this;(0,v.g)(this,M,_).call(this,{opp:"utimes",args:[t,e,r]},(function(){n._utimesState(t,e,r)}))}},{key:"_utimesState",value:function(t,e,r){(0,v.g)(this,M,j).call(this,t).lastModified=r}},{key:"writeFile",value:function(t,e,r){var n=(0,v.g)(this,M,T).call(this,t),i=n.pop(),a=(0,v.g)(this,M,j).call(this,n.join("/"));if(Object.prototype.hasOwnProperty.call(a.children,i)){var o=a.children[i];o.lastModified=Date.now(),(0,v.g)(this,M,A).call(this,{opp:"setLastModified",args:[t,o.lastModified]})}else{if(0===this.state.pool.length)throw new Error("No more file handles available in the pool");var s={type:"file",lastModified:Date.now(),mode:(null===r||void 0===r?void 0:r.mode)||C,backingFilename:this.state.pool.pop()};a.children[i]=s,(0,v.g)(this,M,A).call(this,{opp:"createFileNode",args:[t,s]})}var c=a.children[i],l=(0,v.d)(this,O).get(c.backingFilename);e.length>0&&(l.write("string"==typeof e?(new TextEncoder).encode(e):new Int8Array(e),{at:0}),t.startsWith("/pg_wal")&&(0,v.d)(this,D).add(l))}},{key:"_createFileNodeState",value:function(t,e){var r=(0,v.g)(this,M,T).call(this,t),n=r.pop();(0,v.g)(this,M,j).call(this,r.join("/")).children[n]=e;var i=this.state.pool.indexOf(e.backingFilename);return i>-1&&this.state.pool.splice(i,1),e}},{key:"_setLastModifiedState",value:function(t,e){(0,v.g)(this,M,j).call(this,t).lastModified=e}},{key:"write",value:function(t,e,r,n,i){var a=(0,v.g)(this,M,z).call(this,t),o=(0,v.g)(this,M,j).call(this,a);if("file"!==o.type)throw new w("EISDIR","Is a directory");var s=(0,v.d)(this,O).get(o.backingFilename);if(!s)throw new w("EBADF","Bad file descriptor");var c=s.write(new Int8Array(e,r,n),{at:i});return a.startsWith("/pg_wal")&&(0,v.d)(this,D).add(s),c}}],[{key:"create",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(r){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new t(r),e.next=3,n.readyPromise;case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),t}();k=new WeakMap,g=new WeakMap,S=new WeakMap,Z=new WeakMap,P=new WeakMap,E=new WeakMap,x=new WeakMap,O=new WeakMap,F=new WeakMap,N=new WeakMap,b=new WeakMap,D=new WeakMap,M=new WeakSet,I=function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,r,n,c,l,h,u,d,f,p,y,w,m,F,N,b=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=v.f,t.t1=this,t.t2=g,t.next=5,navigator.storage.getDirectory();case 5:return t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),t.t4=v.f,t.t5=this,t.t6=S,t.next=12,(0,v.g)(this,M,R).call(this,this.root,{create:!0});case 12:return t.t7=t.sent,(0,t.t4)(t.t5,t.t6,t.t7),t.t8=v.f,t.t9=this,t.t10=Z,t.next=19,(0,v.g)(this,M,R).call(this,"data",{from:(0,v.d)(this,S),create:!0});case 19:return t.t11=t.sent,(0,t.t8)(t.t9,t.t10,t.t11),t.t12=v.f,t.t13=this,t.t14=P,t.next=26,(0,v.d)(this,S).getFileHandle("state.txt",{create:!0});case 26:return t.t15=t.sent,(0,t.t12)(t.t13,t.t14,t.t15),t.t16=v.f,t.t17=this,t.t18=E,t.next=33,(0,v.d)(this,P).createSyncAccessHandle();case 33:t.t19=t.sent,(0,t.t16)(t.t17,t.t18,t.t19),e=new ArrayBuffer((0,v.d)(this,E).getSize()),(0,v.d)(this,E).read(e,{at:0}),n=(new TextDecoder).decode(e).split("\n"),c=!1;try{r=JSON.parse(n[0])}catch(D){r={root:{type:"directory",lastModified:Date.now(),mode:H,children:{}},pool:[]},(0,v.d)(this,E).truncate(0),(0,v.d)(this,E).write((new TextEncoder).encode(JSON.stringify(r)),{at:0}),c=!0}this.state=r,l=n.slice(1).filter(Boolean).map((function(t){return JSON.parse(t)})),h=(0,a.Z)(l);try{for(h.s();!(u=h.n()).done;)if(d=u.value,"function"==typeof this[f="_".concat(d.opp,"State")])try{this[f].bind(this).apply(void 0,(0,i.Z)(d.args))}catch(I){console.warn("Error applying OPFS AHP WAL entry",d,I)}}catch(_){h.e(_)}finally{h.f()}return p=[],y=function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var r,n,i,a,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("file"!==e.type){t.next=16;break}return t.prev=1,t.next=4,(0,v.d)(b,Z).getFileHandle(e.backingFilename);case 4:return r=t.sent,t.next=7,r.createSyncAccessHandle();case 7:n=t.sent,(0,v.d)(b,x).set(e.backingFilename,r),(0,v.d)(b,O).set(e.backingFilename,n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.error("Error opening file handle for node",e,t.t0);case 14:t.next=17;break;case 16:for(i=0,a=Object.values(e.children);i<a.length;i++)s=a[i],p.push(y(s));case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),t.next=46,y(this.state.root);case 46:w=[],m=(0,a.Z)(this.state.pool),t.prev=48,N=(0,o.Z)().mark((function t(){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=F.value,w.push(new Promise(function(){var t=(0,s.Z)((0,o.Z)().mark((function t(r){var n,i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,v.d)(b,x).has(e)&&console.warn("File handle already exists for pool file",e),t.next=3,(0,v.d)(b,Z).getFileHandle(e);case 3:return n=t.sent,t.next=6,n.createSyncAccessHandle();case 6:i=t.sent,(0,v.d)(b,x).set(e,n),(0,v.d)(b,O).set(e,i),r();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})),m.s();case 51:if((F=m.n()).done){t.next=55;break}return t.delegateYield(N(),"t20",53);case 53:t.next=51;break;case 55:t.next=60;break;case 57:t.prev=57,t.t21=t.catch(48),m.e(t.t21);case 60:return t.prev=60,m.f(),t.finish(60);case 63:return t.next=65,Promise.all([].concat(p,w));case 65:return t.next=67,this.maintainPool(c?this.initialPoolSize:this.maintainedPoolSize);case 67:(0,v.f)(this,k,!0);case 68:case"end":return t.stop()}}),t,this,[[48,57,60,63]])})));return function(){return t.apply(this,arguments)}}(),_=function(t,e){var r=(0,v.g)(this,M,A).call(this,t);try{e()}catch(n){throw(0,v.d)(this,E).truncate(r),n}},A=function(t){var e=JSON.stringify(t),r=(new TextEncoder).encode("\n".concat(e)),n=(0,v.d)(this,E).getSize();return(0,v.d)(this,E).write(r,{at:n}),(0,v.d)(this,D).add((0,v.d)(this,E)),n},T=function(t){return t.split("/").filter(Boolean)},j=function(t,e){var r,n=(0,v.g)(this,M,T).call(this,t),i=e||this.state.root,o=(0,a.Z)(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;if("directory"!==i.type)throw new w("ENOTDIR","Not a directory");if(!Object.prototype.hasOwnProperty.call(i.children,s))throw new w("ENOENT","No such file or directory");i=i.children[s]}}catch(c){o.e(c)}finally{o.f()}return i},z=function(t){var e=(0,v.d)(this,N).get(t);if(!e)throw new w("EBADF","Bad file descriptor");return e},W=function(){for(var t=++(0,v.h)(this,F)._;(0,v.d)(this,N).has(t);)(0,v.h)(this,F)._++;return t},R=function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e,r){var n,i,s,c,l;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,v.g)(this,M,T).call(this,e),i=(null===r||void 0===r?void 0:r.from)||(0,v.d)(this,g),s=(0,a.Z)(n),t.prev=2,s.s();case 4:if((c=s.n()).done){t.next=11;break}return l=c.value,t.next=8,i.getDirectoryHandle(l,{create:null===r||void 0===r?void 0:r.create});case 8:i=t.sent;case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),s.e(t.t0);case 16:return t.prev=16,s.f(),t.finish(16);case 19:return t.abrupt("return",i);case 20:case"end":return t.stop()}}),t,this,[[2,13,16,19]])})));return function(e,r){return t.apply(this,arguments)}}();var J,L,V=B,Y=function(t){(0,u.Z)(r,t);var e=(0,d.Z)(r);function r(t){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.initialPoolSize,s=a.maintainedPoolSize;return(0,h.Z)(this,r),i=e.call(this,t),(0,v.e)((0,n.Z)(i),J),(0,v.e)((0,n.Z)(i),L),(0,v.f)((0,n.Z)(i),J,null!==o&&void 0!==o?o:1e3),(0,v.f)((0,n.Z)(i),L,null!==s&&void 0!==s?s:100),i}return(0,l.Z)(r,[{key:"emscriptenOpts",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var r=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.create({root:this.dataDir,initialPoolSize:(0,v.d)(this,J),maintainedPoolSize:(0,v.d)(this,L)});case 2:return this.opfsAhp=t.sent,t.abrupt("return",(0,c.Z)((0,c.Z)({},e),{},{preRun:[].concat((0,i.Z)(e.preRun||[]),[function(t){var e=m(t,r.opfsAhp);t.FS.mkdir(p.h),t.FS.mount(e,{},p.h)}])}));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"syncToFs",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var r,n,i,a,s=arguments;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>1&&void 0!==s[1]&&s[1],t.next=3,null===(r=this.opfsAhp)||void 0===r?void 0:r.maybeCheckpointState();case 3:return t.next=5,null===(n=this.opfsAhp)||void 0===n?void 0:n.maintainPool();case 5:a||null===(i=this.opfsAhp)||void 0===i||i.flush();case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"dumpTar",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e,r,n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.c)(e,r,n));case 1:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!==(r=this.opfsAhp)&&void 0!==r&&r.exit(),e.quit();case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),r}(p.a);J=new WeakMap,L=new WeakMap}}]);
//# sourceMappingURL=483.afd6e2ce.chunk.js.map